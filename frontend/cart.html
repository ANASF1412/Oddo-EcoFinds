<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - EcoFinds</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="nav-left">
                    <a href="index.html" class="navbar-brand">
                        <i class="fas fa-leaf brand-icon"></i>
                        <span class="brand-text">EcoFinds</span>
                    </a>
                </div>

                <div class="nav-right">
                    <div class="nav-links">
                        <a href="index.html" class="nav-link">
                            <i class="fas fa-home"></i> Home
                        </a>
                        <a href="login.html" class="nav-link login-link">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </a>
                        <a href="register.html" class="nav-link register-link">
                            <i class="fas fa-user-plus"></i> Sign Up
                        </a>
                        <a href="dashboard.html" class="nav-link hidden" id="dashboardLink">
                            <i class="fas fa-user-circle"></i> Dashboard
                        </a>
                        <a href="cart.html" class="nav-link cart-link active" id="cartLink">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count" id="cartCount">0</span>
                        </a>
                        <button class="nav-link logout-btn hidden" id="logoutBtn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Cart Content -->
    <main class="main-content">
        <div class="container">
            <div class="cart-header">
                <h1><i class="fas fa-shopping-cart"></i> Shopping Cart</h1>
                <p>Review your sustainable treasures before checkout</p>
            </div>

            <div class="cart-content">
                <div class="cart-items-section">
                    <div id="cartItems">
                        <!-- Cart items will be loaded here -->
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i> Loading your cart...
                        </div>
                    </div>
                </div>

                <div class="cart-summary">
                    <div class="summary-card">
                        <h3>Order Summary</h3>
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="cartSubtotal">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Shipping:</span>
                            <span>Free</span>
                        </div>
                        <div class="summary-row total">
                            <span><strong>Total:</strong></span>
                            <span id="cartTotal"><strong>$0.00</strong></span>
                        </div>
                        <button id="checkoutBtn" class="btn btn-primary btn-large" disabled>
                            <i class="fas fa-credit-card"></i> Proceed to Checkout
                        </button>
                        <a href="index.html" class="btn btn-outline btn-large">
                            <i class="fas fa-arrow-left"></i> Continue Shopping
                        </a>
                    </div>
                </div>
            </div>

            <!-- Empty Cart Message -->
            <div id="emptyCart" class="empty-cart-message hidden">
                <div class="empty-cart-content">
                    <i class="fas fa-shopping-cart empty-cart-icon"></i>
                    <h2>Your cart is empty</h2>
                    <p>Discover amazing sustainable treasures to add to your cart</p>
                    <a href="index.html" class="btn btn-primary">
                        <i class="fas fa-search"></i> Browse Products
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-brand">
                        <i class="fas fa-leaf brand-icon"></i>
                        <span class="brand-text">EcoFinds</span>
                    </div>
                    <p class="footer-desc">
                        Your sustainable marketplace for second-hand treasures
                    </p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="dashboard.html">Dashboard</a></li>
                        <li><a href="add_product.html">Sell Item</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul class="footer-links">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 EcoFinds. Made with ðŸ’š for a sustainable future.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/cart.js"></script>
    
    <script>
        // Initialize cart page
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication status
            checkAuthStatus();
            // Load cart items
            loadCart();
        });

        // Format price function
        function formatPrice(price) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(price);
        }

        // Show success message
        function showMessage(message, type = 'success') {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}`;
            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>
